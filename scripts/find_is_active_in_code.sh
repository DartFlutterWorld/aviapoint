#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è is_active –≤ –∫–æ–¥–µ –±—ç–∫–µ–Ω–¥–∞
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

echo "üîç –ü–æ–∏—Å–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è is_active –≤ –∫–æ–¥–µ –±—ç–∫–µ–Ω–¥–∞..."
echo ""
echo "–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:"
echo ""
echo "cd /home/aviapoint_server"
echo ""
echo "# 1. –ù–∞–π—Ç–∏ –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è is_active –≤ –∫–æ–¥–µ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º)"
echo "# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:"
echo "docker-compose -f docker-compose.prod.yaml exec aviapoint-server find /app -name '*.dart' -exec grep -l 'is_active' {} \\; 2>/dev/null"
echo ""
echo "# 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª–Ω—ã–π SQL –∑–∞–ø—Ä–æ—Å –∏–∑ –ª–æ–≥–æ–≤"
echo "docker-compose -f docker-compose.prod.yaml logs --tail=500 | grep -B 50 'is_active' | head -60"
echo ""
echo "# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤ –∫–∞–∫–æ–π —Ç–∞–±–ª–∏—Ü–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–æ–ª–æ–Ω–∫–∞ is_active"
echo "# –°—É–¥—è –ø–æ –ª–æ–≥–∞–º, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∞–±–ª–∏—Ü–∞ flights –∏–ª–∏ airports"
echo ""
echo "# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ is_active"
echo "grep -rn 'is_active' migrations/*.sql"
echo ""
echo "# 5. –ï—Å–ª–∏ –∫–æ–ª–æ–Ω–∫–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é"
echo ""
