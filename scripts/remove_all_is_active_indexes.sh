#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å–æ–∑–¥–∞–Ω–∏–π –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ is_active
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

echo "üóëÔ∏è  –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–∑–¥–∞–Ω–∏–π –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ is_active..."
echo ""
echo "–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:"
echo ""
echo "cd /home/aviapoint_server"
echo ""
echo "# 1. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ is_active –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π"
echo "# (–Ω–µ —Ç—Ä–æ–≥–∞–µ–º sync_schema –∏ test_migration - —ç—Ç–æ —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã)"
echo ""
echo "# –£–¥–∞–ª–∏—Ç—å –∏–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ 072:"
echo "sed -i '/CREATE INDEX IF NOT EXISTS idx_subscriptions_is_active ON subscriptions(is_active);/d' migrations/072_sync_all_tables_and_fields.sql"
echo "sed -i '/CREATE INDEX IF NOT EXISTS idx_aircraft_market_is_active ON aircraft_market(is_active);/d' migrations/072_sync_all_tables_and_fields.sql"
echo ""
echo "# –£–¥–∞–ª–∏—Ç—å –∏–∑ create_aircraft_catalog_tables.sql:"
echo "sed -i '/CREATE INDEX IF NOT EXISTS idx_manufacturers_active ON manufacturers(is_active);/d' migrations/create_aircraft_catalog_tables.sql"
echo "sed -i '/CREATE INDEX IF NOT EXISTS idx_aircraft_models_active ON aircraft_models(is_active);/d' migrations/create_aircraft_catalog_tables.sql"
echo ""
echo "# –£–¥–∞–ª–∏—Ç—å –∏–∑ create_aircraft_types_table.sql:"
echo "sed -i '/CREATE INDEX IF NOT EXISTS idx_aircraft_types_active ON aircraft_types(is_active);/d' migrations/create_aircraft_types_table.sql"
echo ""
echo "# –£–¥–∞–ª–∏—Ç—å –∏–∑ create_airports_table.sql:"
echo "sed -i '/CREATE INDEX IF NOT EXISTS idx_airports_is_active ON airports(is_active);/d' migrations/create_airports_table.sql"
echo ""
echo "# –£–¥–∞–ª–∏—Ç—å –∏–∑ create_market_products_table.sql:"
echo "sed -i '/CREATE INDEX IF NOT EXISTS idx_market_products_is_active ON market_products(is_active);/d' migrations/create_market_products_table.sql"
echo ""
echo "# –£–¥–∞–ª–∏—Ç—å –∏–∑ create_subscriptions_table.sql:"
echo "sed -i '/CREATE INDEX IF NOT EXISTS idx_subscriptions_is_active ON subscriptions(is_active);/d' migrations/create_subscriptions_table.sql"
echo ""
echo "# –£–¥–∞–ª–∏—Ç—å –∏–∑ recreate_airports_table_aopa.sql:"
echo "sed -i '/CREATE INDEX idx_airports_is_active ON airports(is_active);/d' migrations/recreate_airports_table_aopa.sql"
echo ""
echo "# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç"
echo "grep -rn 'CREATE INDEX.*is_active' migrations/*.sql | grep -v sync_schema | grep -v test_migration"
echo ""
