# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ "–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å" - Backend

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, –ø–æ–∑–≤–æ–ª—è—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å `published = false` –∏ —Ç—Ä–µ–±—É—é—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π.

## 1. –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–§–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏: `migrations/add_published_to_news.sql`

–ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç:
- –ü–æ–ª–µ `author_id` (INTEGER, —Å—Å—ã–ª–∫–∞ –Ω–∞ profiles(id))
- –ü–æ–ª–µ `published` (BOOLEAN, DEFAULT FALSE)
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

**–í–∞–∂–Ω–æ**: –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –±—É–¥—É—Ç –∏–º–µ—Ç—å `published = TRUE`.

## 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API

### 2.1. GET /api/news

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å query –ø–∞—Ä–∞–º–µ—Ç—Ä `published` (boolean, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ (`published = true`)
- –ï—Å–ª–∏ `published = false`, –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: 
  - `published = false` –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä—ã —Å–≤–æ–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
  - –ê–≤—Ç–æ—Ä—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ (`author_id = —Ç–µ–∫—É—â–∏–π_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å`)
  - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –≤–∏–¥—è—Ç –≤—Å–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/news?published=true  // –í—Å–µ –≤–∏–¥—è—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ
GET /api/news?published=false  // –ê–≤—Ç–æ—Ä—ã –≤–∏–¥—è—Ç —Å–≤–æ–∏, –∞–¥–º–∏–Ω—ã - –≤—Å–µ
```

### 2.2. GET /api/news/category/{categoryId}

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å query –ø–∞—Ä–∞–º–µ—Ç—Ä `published` (boolean, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/news/category/1?published=true
```

### 2.3. POST /api/news (–ù–û–í–´–ô ENDPOINT)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏)

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è (JWT —Ç–æ–∫–µ–Ω)

**–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:** 
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ JSON, —Ç–∞–∫ –∏ multipart/form-data
- –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ —Ñ–∞–π–ª—ã, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è multipart/form-data
- –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ URL, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JSON

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):**
```json
{
  "title": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏",
  "sub_title": "–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫",
  "source": "–ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–æ–≤–æ—Å—Ç–∏",
  "body": "–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏",
  "picture_mini": "URL –º–∏–Ω–∏–∞—Ç—é—Ä—ã",
  "picture_big": "URL –±–æ–ª—å—à–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è",
  "is_big_news": false,
  "category_id": 1,
  "published": false  // –í—Å–µ–≥–¥–∞ false –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
}
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (multipart/form-data):**
```
title: "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏"
sub_title: "–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫"
source: "–ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–æ–≤–æ—Å—Ç–∏"
body: "–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏"
picture_mini: (—Ñ–∞–π–ª) –∏–ª–∏ "URL –º–∏–Ω–∏–∞—Ç—é—Ä—ã"
picture_big: (—Ñ–∞–π–ª) –∏–ª–∏ "URL –±–æ–ª—å—à–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
is_big_news: false
category_id: 1
published: false
```

**–õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã —Ñ–∞–π–ª—ã (`picture_mini`, `picture_big`), –æ–Ω–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã URL, –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã –∏ —Ñ–∞–π–ª—ã, –∏ URL, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É —Ñ–∞–π–ª–æ–≤

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 123,
  "title": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏",
  "sub_title": "–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫",
  "source": "–ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–æ–≤–æ—Å—Ç–∏",
  "date": "2024-01-15T10:30:00Z",
  "body": "–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏",
  "picture_mini": "URL –º–∏–Ω–∏–∞—Ç—é—Ä—ã",
  "picture_big": "URL –±–æ–ª—å—à–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è",
  "is_big_news": false,
  "category_id": 1,
  "author_id": 456,
  "published": false
}
```

**–õ–æ–≥–∏–∫–∞:**
1. –ü–æ–ª—É—á–∏—Ç—å `author_id` –∏–∑ JWT —Ç–æ–∫–µ–Ω–∞ (—Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `published = false` (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∑–∞–ø—Ä–æ—Å–µ)
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `date = NOW()` (—Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞/–≤—Ä–µ–º—è)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å –≤ –ë–î
5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram (—Å–º. —Ä–∞–∑–¥–µ–ª 3)
6. –í–µ—Ä–Ω—É—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—É—é –Ω–æ–≤–æ—Å—Ç—å

**–û—à–∏–±–∫–∏:**
- `401 Unauthorized` - –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- `400 Bad Request` - –µ—Å–ª–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- `422 Unprocessable Entity` - –µ—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### 2.4. POST /api/news/images/upload (–ù–û–í–´–ô ENDPOINT)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è (JWT —Ç–æ–∫–µ–Ω)

**–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:** multipart/form-data

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `image` (file, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–û—Ç–≤–µ—Ç:**
```json
{
  "url": "path/to/uploaded/image.jpg"
}
```

**–õ–æ–≥–∏–∫–∞:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–º—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, GIF, WebP
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10MB
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## 3. –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram

### 3.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram Bot API:
- –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
- –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- –ü–æ–ª—É—á–∏—Ç—å ID –∫–∞–Ω–∞–ª–∞ (–∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### 3.2. –§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram –∫–∞–Ω–∞–ª —Å–æ —Å–ª–µ–¥—É—é—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:

```
üì∞ –ù–æ–≤–∞—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å

üìå –ó–∞–≥–æ–ª–æ–≤–æ–∫: {title}
üìù –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫: {sub_title}
üîó –ò—Å—Ç–æ—á–Ω–∏–∫: {source}
üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category_name}
üë§ –ê–≤—Ç–æ—Ä: {author_first_name} {author_last_name} ({author_phone})
üìÖ –î–∞—Ç–∞: {date}

üìÑ –¢–µ–∫—Å—Ç:
{body}

üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
–ú–∏–Ω–∏–∞—Ç—é—Ä–∞: {picture_mini}
–ë–æ–ª—å—à–æ–µ: {picture_big}

üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é: {admin_panel_url}/news/{id}/moderate
```

### 3.3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ø—Ä–∏–º–µ—Ä –Ω–∞ PHP)

```php
private function sendTelegramNotification($news, $author) {
    $botToken = env('TELEGRAM_BOT_TOKEN');
    $channelId = env('TELEGRAM_CHANNEL_ID');
    $adminPanelUrl = env('ADMIN_PANEL_URL');
    
    $message = "üì∞ –ù–æ–≤–∞—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å\n\n";
    $message .= "üìå –ó–∞–≥–æ–ª–æ–≤–æ–∫: {$news->title}\n";
    $message .= "üìù –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫: {$news->sub_title}\n";
    $message .= "üîó –ò—Å—Ç–æ—á–Ω–∏–∫: {$news->source}\n";
    $message .= "üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {$news->category->name}\n";
    $message .= "üë§ –ê–≤—Ç–æ—Ä: {$author->first_name} {$author->last_name} ({$author->phone})\n";
    $message .= "üìÖ –î–∞—Ç–∞: {$news->date}\n\n";
    $message .= "üìÑ –¢–µ–∫—Å—Ç:\n{$news->body}\n\n";
    $message .= "üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:\n";
    $message .= "–ú–∏–Ω–∏–∞—Ç—é—Ä–∞: {$news->picture_mini}\n";
    $message .= "–ë–æ–ª—å—à–æ–µ: {$news->picture_big}\n\n";
    $message .= "üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é: {$adminPanelUrl}/news/{$news->id}/moderate";
    
    $url = "https://api.telegram.org/bot{$botToken}/sendMessage";
    $data = [
        'chat_id' => $channelId,
        'text' => $message,
        'parse_mode' => 'HTML'
    ];
    
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data));
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_exec($ch);
    curl_close($ch);
}
```

### 3.4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ï—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram –Ω–µ —É–¥–∞–ª–∞—Å—å, –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

## 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ News

–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ –º–æ–¥–µ–ª—å News:
- `author_id` (INTEGER, nullable, foreign key to profiles)
- `published` (BOOLEAN, default false)

## 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ POST /api/news:
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: title, sub_title, source, body, picture_mini, picture_big, category_id
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `published` –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ (–≤—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å `false`)

## 6. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

- –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
- –ü–æ–ª–µ `published` –Ω–µ–ª—å–∑—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ `true` —á–µ—Ä–µ–∑ API (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π (`published = false`):**
  - –ê–≤—Ç–æ—Ä—ã –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ (`author_id = —Ç–µ–∫—É—â–∏–π_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å`)
  - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –≤—Å–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
  - –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –¥—Ä—É–≥–∏—Ö –∞–≤—Ç–æ—Ä–æ–≤
- **–õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ:**
  ```php
  // –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ GET /api/news?published=false
  if ($published === false) {
      if (isAdmin($user)) {
          // –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç –≤—Å–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
          $query->where('published', false);
      } else {
          // –ê–≤—Ç–æ—Ä –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
          $query->where('published', false)
                ->where('author_id', $user->id);
      }
  }
  ```

## 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
1. –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è
2. POST /api/news —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–æ–≤–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∞ —Å `published = false`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `author_id` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram

### –¢–µ—Å—Ç 2: –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
1. POST /api/news –±–µ–∑ —Ç–æ–∫–µ–Ω–∞
2. –î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ—à–∏–±–∫–∞ 401

### –¢–µ—Å—Ç 3: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
1. GET /api/news
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤–æ—Å—Ç–∏ —Å `published = true`

### –¢–µ—Å—Ç 4: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π (–∞–¥–º–∏–Ω)
1. –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –∞–¥–º–∏–Ω
2. GET /api/news?published=false
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤–æ—Å—Ç–∏ —Å `published = false`

## 8. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤–∏—Ç—å –≤ `.env`:
```
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHANNEL_ID=your_channel_id_here
ADMIN_PANEL_URL=https://admin.aviapoint.ru
```

## 9. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Ä—É

### 9.1. –ü—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏

–ö–æ–≥–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø—É–±–ª–∏–∫—É–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—É—é –Ω–æ–≤–æ—Å—Ç—å (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `published = true`), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É:

**–§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram:**
```
‚úÖ –í–∞—à–∞ –Ω–æ–≤–æ—Å—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞!

üìå –ó–∞–≥–æ–ª–æ–≤–æ–∫: {title}
üìù –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫: {sub_title}

–í–∞—à–∞ –Ω–æ–≤–æ—Å—Ç—å –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞ –∏ —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

üîó –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å: {news_url}
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏ —Å `published = false` –Ω–∞ `published = true`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Telegram ID –∞–≤—Ç–æ—Ä–∞ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è (`profile.telegram_id`)
- –ï—Å–ª–∏ —É –∞–≤—Ç–æ—Ä–∞ –Ω–µ—Ç Telegram ID, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (FCM)

### 9.2. –ü—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏

–ö–æ–≥–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –Ω–æ–≤–æ—Å—Ç—å (—É–¥–∞–ª—è–µ—Ç –∏–ª–∏ –ø–æ–º–µ—á–∞–µ—Ç –∫–∞–∫ –æ—Ç–∫–ª–æ–Ω–µ–Ω–Ω—É—é), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É:

**–§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram:**
```
‚ùå –í–∞—à–∞ –Ω–æ–≤–æ—Å—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞

üìå –ó–∞–≥–æ–ª–æ–≤–æ–∫: {title}
üìù –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫: {sub_title}

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤–∞—à–∞ –Ω–æ–≤–æ—Å—Ç—å –Ω–µ –ø—Ä–æ—à–ª–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.

–ü—Ä–∏—á–∏–Ω–∞: {rejection_reason} (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞)

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –Ω–æ–≤—É—é –Ω–æ–≤–æ—Å—Ç—å, —É—á–∏—Ç—ã–≤–∞—è –∑–∞–º–µ—á–∞–Ω–∏—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞.
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `rejection_reason` –≤ —Ç–∞–±–ª–∏—Ü—É `news` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏ —Å `published = false` –∏–ª–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Å—Ç–∞—Ç—É—Å–∞ "–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ"

## 10. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ú–æ–¥–µ—Ä–∞—Ü–∏—è**: –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
2. **–õ–∏–º–∏—Ç—ã**: –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–µ–Ω—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5 –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –¥–µ–Ω—å)
3. **–ê–Ω—Ç–∏—Å–ø–∞–º**: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã –∏ —Å–ø–∞–º
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ –∞–≤—Ç–æ—Ä–∞–º
5. **–†–µ–π—Ç–∏–Ω–≥ –∞–≤—Ç–æ—Ä–æ–≤**: –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞ –∞–≤—Ç–æ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
