План улучшений приложения Aviapoint (Flutter)

1) Архитектура и слои
- Привести проект к четкой модульности: `core/` (foundation), `features/*` (по доменам: auth, learning, news, market, profile и т.д.), `shared/` (ui-kit, utils, widgets, theming).
- Внутри фич внедрить слойность: `data/` (источники, модели DTO), `domain/` (use cases, entities, репозитории), `presentation/` (Bloc/Cubit/View).
- Выделить навигацию в централизованный модуль: `router` на базе `auto_route` с единой картой экранов и guards.

2) Зависимости и версии
- Обновить Flutter SDK до актуального стабильного канала, синхронизировать `environment sdk` и версии пакетов.
- Пересмотреть `dependency_overrides` для `modal_bottom_sheet`: удалить override после фикса апстрима, зафиксировать стабильную версию.
- Проверить конфликтующие версии Firebase/OneSignal, выровнять мажоры, включить строгий контроль версий в `pubspec.lock` (CI проверка).

3) DI и конфигурация окружений
- Централизовать DI в `injection_container.dart`: типобезопасные фабрики, lazySingle, dispose-хуки, тестовые модули.
- Развести конфиги окружений (`dev`, `stage`, `prod`) через `--dart-define`, `.env` генерацию и шаблоны `firebase_options.dart` для каждого env.
- Секреты и ключи хранить вне репо (CI/CD секреты), исключить из git.

4) Сеть, API и ошибки
- Стандартизировать слой сети на `dio`+`retrofit`: перехватчики (логер, авторизация, перезапрос токена, таймауты, retry/backoff).
- Ввести единую модель ошибок домена и маппинг HTTP/сокет ошибок в user-friendly статусы.
- Добавить глобальную обработку uncaught ошибок: Crashlytics + пользовательские boundary виджеты, безопасная деградация UI.

5) Авторизация и безопасность
- Убрать глобальный `HttpOverrides` с `badCertificateCallback=true` в проде. Оставить только за флагом для dev-сборок.
- Хранение токенов строго в `flutter_secure_storage`. Ввести автообновление токена и логаут при 401.
- Защитить web: отключить лишние разрешения, настроить CSP, убрать лишний SEO-индекс для приватных страниц.

6) Состояние и реактивность
- Утвердить единый подход: `flutter_bloc` с `sealed` состояниями и `freezed` моделями.
- Удалить `setState` в глубоких местах, вынести логику в Cubit/Bloc. Ограничить `bloc_concurrency` осознанно (sequential vs droppable для скролл-ивентов).
- Ввести form-state абстракцию (ввод, валидация, отправка) для унификации форм.

7) UI/UX и дизайн-система
- Создать UI-kit: общие кнопки, поля, лоадеры, пустые состояния, ошибки, skeletons (на `shimmer_animation`).
- Настроить темизацию (light/dark), типографику на `Geologica`, размеры через `flutter_screenutil` только там, где нужно.
- Проверить доступность: контраст, размеры touch-таргетов, фокус для web, озвучивание для чтения с экрана.

8) Локализация и контент
- Консолидировать локализацию на `easy_localization`: ключи в `assets/translations`, регламент именования ключей.
- Включить проверку отсутствующих ключей в CI. Добавить EN как основной fallback.
- Для HTML-контента (`flutter_html`/`widget_from_html`) ограничить небезопасные теги и стили.

9) Производительность
- Анализ производительности: профилировать списки (virtualize, `ScrollablePositionedList`/`Sliver`), мемоизация `const`/`Equatable`.
- Кэширование изображений и видео (`cached_network_image`, `flutter_cache_manager`), прогрев критичных ресурсов на старте.
- Lazy загрузка фич (deferred import) для web, сокращение initial bundle, code-splitting роутов.

10) Оффлайн и устойчивость
- Ввести оффлайн-кэш для ключевых данных (новости, учебные материалы) и стратегию синхронизации.
- Режим деградации сети: очереди запросов, повтор при восстановлении соединения.

11) Нотификации и аналитика
- Унифицировать push: Firebase/OneSignal — единый фасад, обработка deeplink, трекинг открытий.
- Аналитика событий (Firebase Analytics): события/параметры, screen_view, корреляция с Crashlytics.

12) Тестирование и качество
- Unit-тесты для use-cases и репозиториев; bloc-тесты для состояний; widget-тесты критичных экранов.
- Золотые тесты UI (goldens) для дизайн-системы.
- Lints: актуализировать `dart_code_metrics`, включить дополнительные правила, фиксировать авто-формат.

13) CI/CD и сборки
- Включить GitHub Actions/Bitrise: формат + анализ + тесты + build (web/apk/ipa), кэш pub, артефакты.
- Автоген иконок (`flutter_launcher_icons`), сплэш (`flutter_native_splash`) в pipeline.
- Версионирование через скрипт (`version.sh`) с автоподнятием build number и генерацией changelog.

14) Web и SEO
- Проверить `MetaSEO().config()` только для web; добавить теги meta/open-graph по экрану.
- Включить `url_strategy` уже настроен — сохранить человекопонятные URL, добавить sitemap/robots.

15) Документация и dev-experience
- Обновить `README.md`: запуск, окружения, команды, структура проекта, гайд по фичам и навигации.
- Добавить `scripts/` команды: линт, тесты, pub get, генерилки (`build_runner`, intl), локальный прокси.
- Шаблоны PR/ISSUE, Contributing, кодстайл (имена, импорты, архитектурные правила).

16) Миграции и быстрые победы (первый спринт)
- Удалить `HttpOverrides` в проде; оставить фича-флаг для dev.
- Вынести навигацию на `auto_route` полностью и ввести guards для auth.
- Перевести сетевой слой ключевых фич на `retrofit` с единой обработкой ошибок.
- Создать UI-kit и заменить дублирующиеся кнопки/поля.
- Включить базовый CI: формат, анализ, тесты, web build как артефакт.

17) Метрики успеха
- Падения/ANR (Crashlytics) < 1% активных пользователей.
- Время старта до первого полезного экрана < 1.5s (мобильные) / TTI web < 3s.
- Покрытие тестами ядра (domain+data) ≥ 60% за 2 спринта.
- Ноль уязвимостей хранения токенов и сертификатов в проде.

Примечания по текущему состоянию (на базе обзора):
- Используются `auto_route`, `flutter_bloc`, `dio`, `freezed`, `retrofit`, что соответствует рекомендуемому стеку — требуется консолидация и единые практики.
- Есть `dependency_overrides` и глобальный `HttpOverrides` — приоритетно исправить.
- Локализация через `easy_localization` и `l10n` активирована — привести к единому источнику переводов и проверке ключей.