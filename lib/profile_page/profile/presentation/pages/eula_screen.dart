import 'package:auto_route/auto_route.dart';
import 'package:aviapoint/core/presentation/widgets/custom_app_bar.dart';
import 'package:aviapoint/core/themes/app_colors.dart';
import 'package:aviapoint/core/themes/app_styles.dart';
import 'package:aviapoint/core/utils/const/helper.dart';
import 'package:flutter/material.dart';

/// Экран с условиями использования приложения AviaPoint.
/// Отображается как статический текст (аналогично экрану Политики конфиденциальности).
@RoutePage()
class EulaScreen extends StatelessWidget {
  const EulaScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: CustomAppBar(title: 'Условия использования', withBack: true),
      backgroundColor: AppColors.background,
      body: SingleChildScrollView(
        padding: EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text('Условия использования приложения AviaPoint', style: AppStyles.bold20s.copyWith(color: Color(0xFF2B373E))),
            SizedBox(height: 8),
            Text(
              'Дата последнего обновления: ${formatDate(DateTime.now())}',
              style: AppStyles.regular12s.copyWith(color: Color(0xFF4B5767)),
            ),
            SizedBox(height: 24),
            _buildSection(
              '1. Общие положения',
              'Настоящие Условия использования (далее — «Условия») регулируют порядок использования мобильного приложения AviaPoint (далее — «Приложение») и предоставляемых через него сервисов.\n\n'
                  'Устанавливая Приложение и/или используя его, вы подтверждаете, что ознакомлены с Условиями и принимаете их в полном объёме. Если вы не согласны с Условиями, пожалуйста, удалите Приложение и прекратите его использование.\n\n'
                  'Правообладателем Приложения является владелец ресурса avia-point.com (далее — «Правообладатель»).',
            ),
            _buildSection(
              '2. Описание сервиса',
              'Приложение AviaPoint предоставляет доступ к информационным и учебным материалам, тестам, справочникам и другим функциям, связанным с авиацией, а также к дополнительным платным сервисам (включая тренировочный режим тестирования и раздел «По пути»).\n\n'
                  'Конкретный набор функций и содержание Приложения могут изменяться Правообладателем в одностороннем порядке без предварительного уведомления.',
            ),
            _buildSection(
              '3. Регистрация и аккаунт',
              'Для использования отдельных функций Приложения может потребоваться регистрация и создание учётной записи.\n\n'
                  'Вы обязуетесь предоставлять достоверные данные и поддерживать их в актуальном состоянии, а также хранить данные своей учётной записи (логин и пароль) в тайне и не передавать их третьим лицам.\n\n'
                  'Все действия, совершённые с использованием вашей учётной записи, считаются совершёнными вами, если не доказано иное.',
            ),
            _buildSection(
              '4. Подписки и платный контент',
              'Часть функциональности Приложения предоставляется на платной основе по модели подписки или разовых встроенных покупок через Apple App Store.\n\n'
                  'Стоимость, срок и условия подписки (включая «РосАвиаТест — тренировочный режим») указываются в интерфейсе App Store до момента покупки и могут отличаться в зависимости от региона и валюты.\n\n'
                  'Подписка может иметь автообновляемый характер: по окончании оплаченного периода подписка автоматически продлевается на следующий период, если вы заранее не отменили её в настройках Apple ID.\n\n'
                  'Управление подпиской и её отмена осуществляются через раздел подписок Apple ID на вашем устройстве. Правообладатель не обрабатывает ваши платёжные реквизиты и не несёт ответственности за работу платёжной инфраструктуры Apple.',
            ),
            _buildSection(
              '5. Раздел «По пути» и отказ от ответственности',
              'Раздел «По пути» Приложения предназначен исключительно для информационной и организационной поддержки пользователей при поиске, планировании и обсуждении возможных совместных полётов, маршрутов и перелётов.\n\n'
                  'Правообладатель:\n'
                  '• не является авиаперевозчиком, эксплуатантом воздушных судов, брокером или агентом по продаже авиаперевозок;\n'
                  '• не организует полёты, не управляет воздушными судами и не несёт ответственности за их техническое состояние, подготовку экипажа, выполнение требований безопасности и соблюдение авиационных правил;\n'
                  '• не гарантирует фактическое совершение полёта, его маршрут, время вылета/прилёта, уровень комфорта и иные условия.\n\n'
                  'Вся ответственность за совершение полёта, соблюдение требований безопасности, подготовку экипажа, выбор маршрута, погодные условия, разрешительную документацию, а также за любые риски, связанные с нахождением в полёте, лежит исключительно на пользователях и фактическом перевозчике (операторе воздушного судна).\n\n'
                  'В максимально допустимых законом пределах Правообладатель снимает с себя любую юридическую ответственность за любой ущерб, вред жизни или здоровью, имущественный или иной вред, который может возникнуть в результате полёта, отмены или переноса рейса, несоблюдения правил безопасности, действий третьих лиц или иных обстоятельств, находящихся вне разумного контроля Правообладателя.',
            ),
            _buildSection(
              '6. Интеллектуальная собственность',
              'Все объекты, размещённые в Приложении (тексты, графика, логотипы, элементы интерфейса, программный код и др.), защищены авторским правом и иными правами интеллектуальной собственности.\n\n'
                  'Пользователю предоставляется ограниченная, неисключительная и непередаваемая лицензия на использование Приложения на личном устройстве только в личных некоммерческих целях. Любое копирование, распространение, модификация или иное использование материалов Приложения без письменного согласия Правообладателя запрещены.',
            ),
            _buildSection(
              '7. Ограничение ответственности',
              'Приложение предоставляется по принципу «как есть» (AS IS). Правообладатель не гарантирует бесперебойную и безошибочную работу Приложения, а также его полное соответствие ожиданиям пользователя.\n\n'
                  'Правообладатель не несёт ответственности за:\n'
                  '• невозможность использования Приложения по причинам, не зависящим от него (сбои сети, работа сторонних сервисов, App Store, ограничения доступа к интернету и т.п.);\n'
                  '• любые прямые или косвенные убытки, возникшие в результате использования или невозможности использования Приложения, кроме случаев, когда такая ответственность прямо предусмотрена законодательством.\n\n'
                  'Используя Приложение и раздел «По пути», вы осознаёте и принимаете на себя все риски, связанные с планированием и совершением полётов.',
            ),
            _buildSection(
              '8. Изменения Условий',
              'Правообладатель вправе в одностороннем порядке изменять настоящие Условия. Актуальная версия Условий публикуется в Приложении и на сайте https://avia-point.com.\n\n'
                  'Продолжение использования Приложения после вступления изменений в силу означает ваше согласие с обновлённой редакцией Условий.',
            ),
            _buildSection(
              '9. Контакты',
              'По всем вопросам, связанным с использованием Приложения, подписками и разделом «По пути», вы можете связаться с нами:\n\n'
                  'Сайт: https://avia-point.com\n'
                  'Email: admin@avia-point.com\n\n'
                  'Мы постараемся ответить на ваш запрос в разумный срок.',
            ),
            SizedBox(height: 24),
          ],
        ),
      ),
    );
  }

  Widget _buildSection(String title, String content) {
    return Padding(
      padding: EdgeInsets.only(bottom: 24),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(title, style: AppStyles.bold16s.copyWith(color: Color(0xFF2B373E))),
          SizedBox(height: 8),
          Text(content, style: AppStyles.regular14s.copyWith(color: Color(0xFF4B5767), height: 1.5)),
        ],
      ),
    );
  }
}
