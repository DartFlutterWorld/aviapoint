import 'package:auto_route/auto_route.dart';
import 'package:aviapoint/core/presentation/widgets/custom_app_bar.dart';
import 'package:aviapoint/core/themes/app_colors.dart';
import 'package:aviapoint/core/themes/app_styles.dart';
import 'package:aviapoint/core/utils/const/helper.dart';
import 'package:flutter/material.dart';

@RoutePage()
class PrivacyPolicyScreen extends StatelessWidget {
  const PrivacyPolicyScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: CustomAppBar(title: 'Политика конфиденциальности', withBack: true),
      backgroundColor: AppColors.background,
      body: SingleChildScrollView(
        padding: EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text('Политика конфиденциальности', style: AppStyles.bold20s.copyWith(color: Color(0xFF2B373E))),
            SizedBox(height: 8),
            Text('Дата последнего обновления: ${formatDate(DateTime.now())}', style: AppStyles.regular12s.copyWith(color: Color(0xFF4B5767))),
            SizedBox(height: 24),
            _buildSection(
              '1. Общие положения',
              'Настоящая Политика конфиденциальности определяет порядок обработки и защиты персональных данных пользователей мобильного приложения AviaPoint (далее — "Приложение").\n\n'
                  'Используя Приложение, вы соглашаетесь с условиями настоящей Политики конфиденциальности. Если вы не согласны с условиями, пожалуйста, не используйте Приложение.',
            ),
            _buildSection(
              '2. Собираемая информация',
              'При использовании Приложения мы можем собирать следующую информацию:\n\n'
                  '• Персональные данные, предоставленные при регистрации (имя, фамилия, email, номер телефона)\n'
                  '• Данные о вашем устройстве (модель, версия операционной системы, уникальный идентификатор устройства)\n'
                  '• Данные об использовании Приложения (время использования, функции, к которым вы обращаетесь)\n'
                  '• Технические данные (IP-адрес, тип браузера, данные о подключении)\n'
                  '• Данные о прохождении тестов и обучении (прогресс, результаты тестирования)',
            ),
            _buildSection(
              '3. Цели использования информации',
              'Собранная информация используется для:\n\n'
                  '• Предоставления и улучшения функциональности Приложения\n'
                  '• Персонализации вашего опыта использования\n'
                  '• Обработки ваших запросов и запросов поддержки\n'
                  '• Отправки уведомлений и важной информации\n'
                  '• Анализа использования Приложения для его улучшения\n'
                  '• Обеспечения безопасности и предотвращения мошенничества\n'
                  '• Соблюдения требований законодательства',
            ),
            _buildSection(
              '4. Хранение и защита данных',
              'Мы применяем современные технические и организационные меры для защиты ваших персональных данных от несанкционированного доступа, изменения, раскрытия или уничтожения.\n\n'
                  'Ваши данные хранятся на защищенных серверах и обрабатываются в соответствии с требованиями законодательства о защите персональных данных.\n\n'
                  'Данные о прохождении тестов и обучении хранятся локально на вашем устройстве и могут быть синхронизированы с нашими серверами для обеспечения доступа с разных устройств.',
            ),
            _buildSection(
              '5. Передача данных третьим лицам',
              'Мы не продаем, не обмениваем и не передаем ваши персональные данные третьим лицам без вашего согласия, за исключением случаев:\n\n'
                  '• Когда это необходимо для предоставления услуг (например, облачные сервисы хранения данных)\n'
                  '• Когда это требуется по закону или по запросу государственных органов\n'
                  '• Для защиты наших прав и безопасности\n\n'
                  'Мы можем использовать сторонние сервисы аналитики (например, Firebase Analytics, Crashlytics) для улучшения работы Приложения. Эти сервисы обрабатывают данные в соответствии со своими политиками конфиденциальности.',
            ),
            _buildSection(
              '6. Ваши права',
              'Вы имеете право:\n\n'
                  '• Получать информацию о том, какие персональные данные мы обрабатываем\n'
                  '• Требовать исправления неточных данных\n'
                  '• Требовать удаления ваших персональных данных\n'
                  '• Возражать против обработки ваших данных\n'
                  '• Отозвать согласие на обработку данных\n'
                  '• Очистить локальные данные через функцию "Очистить прогресс" в настройках профиля',
            ),
            _buildSection(
              '7. Cookies и аналогичные технологии',
              'Приложение может использовать cookies и аналогичные технологии для улучшения функциональности и анализа использования. Вы можете управлять настройками cookies через настройки вашего устройства.',
            ),
            _buildSection(
              '8. Дети',
              'Наше Приложение не предназначено для лиц младше 18 лет. Мы сознательно не собираем персональные данные от детей. Если мы узнаем, что собрали данные от ребенка без согласия родителей, мы примем меры для удаления такой информации.',
            ),
            _buildSection(
              '9. Изменения в Политике конфиденциальности',
              'Мы оставляем за собой право вносить изменения в настоящую Политику конфиденциальности. О существенных изменениях мы уведомим вас через Приложение или по электронной почте. Продолжение использования Приложения после внесения изменений означает ваше согласие с обновленной Политикой.',
            ),
            _buildSection(
              '10. Контакты',
              'Если у вас есть вопросы относительно настоящей Политики конфиденциальности или обработки ваших персональных данных, вы можете связаться с нами:\n\n'
                  'Email: privacy@avia-point.com\n'
                  'Телефон: +7 (XXX) XXX-XX-XX\n\n'
                  'Мы постараемся ответить на ваш запрос в течение 30 дней.',
            ),
            SizedBox(height: 24),
          ],
        ),
      ),
    );
  }

  Widget _buildSection(String title, String content) {
    return Padding(
      padding: EdgeInsets.only(bottom: 24),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(title, style: AppStyles.bold16s.copyWith(color: Color(0xFF2B373E))),
          SizedBox(height: 8),
          Text(content, style: AppStyles.regular14s.copyWith(color: Color(0xFF4B5767), height: 1.5)),
        ],
      ),
    );
  }
}
